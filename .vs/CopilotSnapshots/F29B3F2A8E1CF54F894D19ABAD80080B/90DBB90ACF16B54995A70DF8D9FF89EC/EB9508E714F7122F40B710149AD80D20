namespace DevPortal.Models;

public class Resource
{
    public string Id { get; set; } = string.Empty;
    public string Name { get; set; } = string.Empty;
    public string Type { get; set; } = string.Empty;
    public string ResourceGroup { get; set; } = string.Empty;
    public string Location { get; set; } = string.Empty;
    public string Status { get; set; } = "Unknown";
    public DateTime LastViewed { get; set; } = DateTime.UtcNow;
    public bool IsFavorite { get; set; } = false;
    public Dictionary<string, string> Tags { get; set; } = new();
    
    public string GetIcon()
    {
        return Type.ToLower() switch
        {
            "app service" => "🌐",
            "app service plan" => "📦",
            "load balancer" => "⚖️",
            "template spec" => "📋",
            "resource group" => "📁",
            "storage account" => "💾",
            "key vault" => "🔐",
            "sql database" => "🗄️",
            "virtual machine" => "💻",
            "function app" => "⚡",
            _ => "📄"
        };
    }
    
    public string GetTimeAgo()
    {
        var timeSpan = DateTime.UtcNow - LastViewed;
        
        if (timeSpan.TotalMinutes < 60)
            return $"{(int)timeSpan.TotalMinutes} minutes ago";
        if (timeSpan.TotalHours < 24)
            return $"{(int)timeSpan.TotalHours} hours ago";
        if (timeSpan.TotalDays < 7)
            return $"{(int)timeSpan.TotalDays} days ago";
        if (timeSpan.TotalDays < 30)
            return $"{(int)(timeSpan.TotalDays / 7)} weeks ago";
        
        return $"{(int)(timeSpan.TotalDays / 30)} months ago";
    }
}
